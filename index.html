<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLBB AURA | A.U.R.A Intel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #020617; color: #f8fafc; }
        .glass-card { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .hero-active { border-color: #3b82f6 !important; background: rgba(59, 130, 246, 0.15) !important; box-shadow: 0 0 20px rgba(59, 130, 246, 0.1); }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
        @keyframes scanline { 0% { top: -10%; } 100% { top: 110%; } }
        .scan-effect::after { content: ""; position: absolute; width: 100%; height: 4px; background: linear-gradient(to right, transparent, #3b82f6, transparent); top: 0; left: 0; animation: scanline 2.5s cubic-bezier(0.4, 0, 0.2, 1) infinite; box-shadow: 0 0 20px #3b82f6; z-index: 50; }
    </style>
</head>
<body class="h-screen flex flex-col p-4 overflow-hidden">

    <!-- Header -->
    <header class="flex justify-between items-center mb-4 px-6 py-4 glass-card rounded-3xl border-b border-blue-500/10">
        <div class="flex items-center gap-4">
            <div class="p-3 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl shadow-lg shadow-blue-500/20">
                <i data-lucide="cpu" class="text-white w-6 h-6"></i>
            </div>
            <div>
                <h1 class="text-xl font-extrabold tracking-tight italic">MLBB <span class="text-blue-500">AURA</span></h1>
                <p class="text-[9px] text-slate-400 font-bold uppercase tracking-[0.25em]">Advanced Ultra-Responsive Analysis</p>
            </div>
        </div>
        <div id="connectionStatus" class="bg-slate-800/50 px-5 py-2 rounded-full border border-white/5 flex items-center gap-3">
            <div class="w-2 h-2 rounded-full bg-blue-500 animate-pulse"></div>
            <span class="text-[10px] font-black text-slate-300 uppercase tracking-widest">REAL-TIME DATA SYNC</span>
        </div>
    </header>

    <main class="flex-1 flex gap-4 overflow-hidden">
        <aside class="w-80 flex flex-col gap-4">
            <div class="glass-card rounded-3xl p-5 flex-1 flex flex-col overflow-hidden">
                <div class="relative mb-4">
                    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"></i>
                    <input id="heroSearch" type="text" placeholder="Search Hero Database..." class="w-full bg-slate-950 border border-slate-800 rounded-2xl py-3 pl-11 pr-4 text-sm focus:border-blue-500 outline-none transition-all">
                </div>
                <div id="heroList" class="flex-1 overflow-y-auto space-y-1 pr-2 custom-scroll"></div>
            </div>
        </aside>

        <section class="flex-1 flex flex-col gap-4 overflow-hidden">
            <div id="heroPortal" class="glass-card rounded-3xl p-8 relative overflow-hidden flex items-center justify-between min-h-[160px]">
                <div id="heroBanner" class="absolute inset-0 opacity-10 bg-cover bg-center transition-all duration-1000 blur-md"></div>
                <div class="relative z-10">
                    <div class="flex gap-2 mb-2">
                        <span id="roleBadge" class="bg-blue-500/10 text-blue-400 text-[10px] font-black px-3 py-1 rounded-full border border-blue-500/20 uppercase">Standby</span>
                        <span id="laneBadge" class="bg-slate-900 text-slate-500 text-[10px] font-black px-3 py-1 rounded-full border border-white/5 uppercase">N/A</span>
                    </div>
                    <h2 id="heroName" class="text-6xl font-black italic tracking-tighter uppercase text-white">READY</h2>
                    <p id="heroStatusText" class="text-slate-500 mt-1 font-medium text-sm">Select target to initiate authentic MLBB counter-strategy.</p>
                </div>
                <div class="relative z-10">
                    <button id="scanBtn" onclick="generateCounterIntel()" disabled class="btn btn-primary btn-lg rounded-2xl h-16 px-10 shadow-xl shadow-blue-500/30 font-black tracking-widest disabled:opacity-20">
                        <i data-lucide="zap" class="w-5 h-5 mr-2"></i>
                        EXECUTE INTEL
                    </button>
                </div>
            </div>

            <div id="intelOutput" class="flex-1 overflow-hidden relative">
                <div id="emptyState" class="h-full flex flex-col items-center justify-center glass-card rounded-3xl opacity-30 italic p-10 text-center">
                    <i data-lucide="shield-check" class="w-16 h-16 mb-4 text-blue-500/50"></i>
                    <p class="text-xl uppercase font-black tracking-widest">A.U.R.A Core Online</p>
                    <p class="text-sm mt-2">Authentic Mobile Legends Database Linked.</p>
                </div>

                <div id="intelResults" class="hidden h-full grid grid-cols-12 gap-4 overflow-y-auto pr-2 custom-scroll">
                    <div class="col-span-7 glass-card rounded-3xl p-6 border-l-4 border-blue-600">
                        <h3 class="text-xs font-black text-blue-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-3">
                            <i data-lucide="swords" class="w-4 h-4"></i> Hard Counter Heroes
                        </h3>
                        <div id="counterHeroes" class="grid grid-cols-1 gap-3"></div>
                    </div>
                    <div class="col-span-5 flex flex-col gap-4">
                        <div class="glass-card rounded-3xl p-6 border-l-4 border-orange-500">
                            <h3 class="text-xs font-black text-orange-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-3">
                                <i data-lucide="wrench" class="w-4 h-4"></i> Recommended Build
                            </h3>
                            <div id="counterGear" class="space-y-4"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script type="module">
        let selectedHero = null;

        const HEROES = [
            { name: "Miya", role: "Marksman", lane: "Gold Lane" },
            { name: "Balmond", role: "Fighter", lane: "Jungle/EXP" },
            { name: "Saber", role: "Assassin", lane: "Jungle" },
            { name: "Alice", role: "Tank/Mage", lane: "EXP" },
            { name: "Nana", role: "Mage", lane: "Mid" },
            { name: "Tigreal", role: "Tank", lane: "Roaming" },
            { name: "Alucard", role: "Fighter/Assassin", lane: "Jungle" },
            { name: "Karina", role: "Assassin", lane: "Jungle" },
            { name: "Akai", role: "Tank", lane: "Roaming/Jungle" },
            { name: "Franco", role: "Tank", lane: "Roaming" },
            { name: "Bane", role: "Fighter/Mage", lane: "Jungle/EXP" },
            { name: "Bruno", role: "Marksman", lane: "Gold" },
            { name: "Clint", role: "Marksman", lane: "Gold" },
            { name: "Rafaela", role: "Support", lane: "Roaming" },
            { name: "Eudora", role: "Mage", lane: "Mid" },
            { name: "Zilong", role: "Fighter/Assassin", lane: "EXP" },
            { name: "Fanny", role: "Assassin", lane: "Jungle" },
            { name: "Layla", role: "Marksman", lane: "Gold" },
            { name: "Minotaur", role: "Tank/Support", lane: "Roaming" },
            { name: "Lolita", role: "Support/Tank", lane: "Roaming" },
            { name: "Hayabusa", role: "Assassin", lane: "Jungle" },
            { name: "Freya", role: "Fighter", lane: "EXP/Jungle" },
            { name: "Gord", role: "Mage", lane: "Mid" },
            { name: "Natalia", role: "Assassin", lane: "Roaming" },
            { name: "Kagura", role: "Mage", lane: "Mid" },
            { name: "Chou", role: "Fighter", lane: "EXP/Roaming" },
            { name: "Sun", role: "Fighter", lane: "EXP/Jungle" },
            { name: "Alpha", role: "Fighter", lane: "Jungle/EXP" },
            { name: "Ruby", role: "Fighter", lane: "EXP/Roaming" },
            { name: "Moskov", role: "Marksman", lane: "Gold" },
            { name: "Johnson", role: "Tank/Support", lane: "Roaming" },
            { name: "Cyclops", role: "Mage", lane: "Mid" },
            { name: "Estes", role: "Support", lane: "Roaming" },
            { name: "Hilda", role: "Fighter/Tank", lane: "Roaming/EXP" },
            { name: "Aurora", role: "Mage", lane: "Mid" },
            { name: "Lapu-Lapu", role: "Fighter", lane: "EXP" },
            { name: "Vexana", role: "Mage", lane: "Mid" },
            { name: "Roger", role: "Fighter/Marksman", lane: "Jungle" },
            { name: "Karrie", role: "Marksman", lane: "Gold" },
            { name: "Gatotkaca", role: "Tank/Fighter", lane: "Roaming/EXP" },
            { name: "Harley", role: "Assassin/Mage", lane: "Jungle" },
            { name: "Irithel", role: "Marksman", lane: "Gold" },
            { name: "Grock", role: "Tank/Fighter", lane: "Roaming" },
            { name: "Argus", role: "Fighter", lane: "EXP" },
            { name: "Odette", role: "Mage", lane: "Mid" },
            { name: "Lancelot", role: "Assassin", lane: "Jungle" },
            { name: "Diggie", role: "Support", lane: "Roaming" },
            { name: "Hylos", role: "Tank", lane: "Roaming" },
            { name: "Zhask", role: "Mage", lane: "Mid" },
            { name: "Helcurt", role: "Assassin", lane: "Jungle" },
            { name: "Pharsa", role: "Mage", lane: "Mid" },
            { name: "Lesley", role: "Marksman/Assassin", lane: "Gold" },
            { name: "Jawhead", role: "Fighter", lane: "Roaming/EXP" },
            { name: "Angela", role: "Support", lane: "Roaming" },
            { name: "Gusion", role: "Assassin", lane: "Jungle" },
            { name: "Valir", role: "Mage", lane: "Mid" },
            { name: "Martis", role: "Fighter", lane: "Jungle" },
            { name: "Uranus", role: "Tank", lane: "EXP" },
            { name: "Hanabi", role: "Marksman", lane: "Gold" },
            { name: "Chang'e", role: "Mage", lane: "Mid" },
            { name: "Kaja", role: "Support/Fighter", lane: "Roaming" },
            { name: "Selena", role: "Assassin/Mage", lane: "Roaming/Mid" },
            { name: "Aldous", role: "Fighter", lane: "EXP" },
            { name: "Claude", role: "Marksman", lane: "Gold" },
            { name: "Vale", role: "Mage", lane: "Mid" },
            { name: "Leomord", role: "Fighter", lane: "Jungle" },
            { name: "Lunox", role: "Mage", lane: "Mid" },
            { name: "Hanzo", role: "Assassin", lane: "Jungle" },
            { name: "Belerick", role: "Tank", lane: "Roaming" },
            { name: "Kimmy", role: "Marksman/Mage", lane: "Gold" },
            { name: "Thamuz", role: "Fighter", lane: "EXP" },
            { name: "Harith", role: "Mage", lane: "Gold" },
            { name: "Minsitthar", role: "Fighter", lane: "Roaming/EXP" },
            { name: "Kadita", role: "Mage/Assassin", lane: "Roaming/Mid" },
            { name: "Faramis", role: "Support/Mage", lane: "Mid" },
            { name: "Badang", role: "Fighter", lane: "EXP" },
            { name: "Khufra", role: "Tank", lane: "Roaming" },
            { name: "Granger", role: "Marksman", lane: "Jungle/Gold" },
            { name: "Guinevere", role: "Fighter", lane: "EXP/Jungle" },
            { name: "Esmeralda", role: "Tank/Mage", lane: "EXP" },
            { name: "Terizla", role: "Fighter/Tank", lane: "EXP" },
            { name: "X.Borg", role: "Fighter", lane: "EXP" },
            { name: "Ling", role: "Assassin", lane: "Jungle" },
            { name: "Dyrroth", role: "Fighter", lane: "EXP" },
            { name: "Lylia", role: "Mage", lane: "Mid" },
            { name: "Baxia", role: "Tank", lane: "Jungle/Roaming" },
            { name: "Masha", role: "Fighter/Tank", lane: "EXP" },
            { name: "Wanwan", role: "Marksman", lane: "Gold" },
            { name: "Silvanna", role: "Fighter", lane: "EXP" },
            { name: "Cecilion", role: "Mage", lane: "Mid" },
            { name: "Carmilla", role: "Support/Tank", lane: "Roaming" },
            { name: "Atlas", role: "Tank", lane: "Roaming" },
            { name: "Yu Zhong", role: "Fighter", lane: "EXP" },
            { name: "Luo Yi", role: "Mage", lane: "Mid" },
            { name: "Benedetta", role: "Assassin/Fighter", lane: "EXP" },
            { name: "Khaleed", role: "Fighter", lane: "EXP" },
            { name: "Barats", role: "Tank/Fighter", lane: "Jungle" },
            { name: "Brody", role: "Marksman", lane: "Gold" },
            { name: "Yve", role: "Mage", lane: "Mid" },
            { name: "Mathilda", role: "Support/Assassin", lane: "Roaming" },
            { name: "Paquito", role: "Fighter/Assassin", lane: "EXP/Jungle" },
            { name: "Gloo", role: "Tank", lane: "EXP" },
            { name: "Beatrix", role: "Marksman", lane: "Gold" },
            { name: "Phoveus", role: "Fighter", lane: "EXP" },
            { name: "Natan", role: "Marksman", lane: "Gold" },
            { name: "Aulus", role: "Fighter", lane: "Jungle" },
            { name: "Aamon", role: "Assassin", lane: "Jungle" },
            { name: "Valentina", role: "Mage", lane: "Mid" },
            { name: "Edith", role: "Tank/Marksman", lane: "EXP" },
            { name: "Floryn", role: "Support", lane: "Roaming" },
            { name: "Yin", role: "Fighter/Assassin", lane: "Jungle" },
            { name: "Melissa", role: "Marksman", lane: "Gold" },
            { name: "Xavier", role: "Mage", lane: "Mid" },
            { name: "Julian", role: "Assassin/Fighter", lane: "Jungle/EXP" },
            { name: "Fredrinn", role: "Fighter/Tank", lane: "Jungle" },
            { name: "Joy", role: "Assassin", lane: "Jungle" },
            { name: "Novaria", role: "Mage", lane: "Mid" },
            { name: "Arlott", role: "Fighter/Assassin", lane: "EXP" },
            { name: "Ixia", role: "Marksman", lane: "Gold" },
            { name: "Nolan", role: "Assassin", lane: "Jungle" },
            { name: "Cici", role: "Fighter", lane: "EXP" },
            { name: "Chip", role: "Support/Tank", lane: "Roaming" },
            { name: "Zhuxin", role: "Mage", lane: "Mid" },
            { name: "Suyou", role: "Assassin/Fighter", lane: "Jungle" },
            { name: "Lukas", role: "Fighter", lane: "EXP" }
        ].sort((a,b) => a.name.localeCompare(b.name));

        async function runFreeAI(heroName) {
            // Updated Prompt with explicit MLBB Database constraints to stop hallucinations
            const prompt = `MOBILE LEGENDS BANG BANG (MLBB) DATA ONLY. 
            Target: ${heroName}. 

            RULES:
            1. Heroes must be from MLBB list (e.g. Karrie, Chou, Diggie).
            2. Items must be REAL MLBB items (e.g. Dominance Ice, Sea Halberd, Demon Hunter Sword).
            3. Spells must be REAL MLBB spells (e.g. Flicker, Petrify, Purify).
            4. DO NOT MENTION "Diablo", "Luci", "Edwards", or "Huron's Bow". These are NOT in the game.
            5. Return JSON only.
            
            Format:
            {
                "heroes": [{"name": "HeroName", "logic": "One short sentence"}],
                "items": [{"name": "ItemName", "desc": "One short sentence"}],
                "spell": {"name": "SpellName", "why": "One short sentence"}
            }`;

            const response = await fetch("https://text.pollinations.ai/", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    messages: [
                        { role: "system", content: "You are a factual MLBB database. You never make up names." },
                        { role: "user", content: prompt }
                    ],
                    model: "openai", 
                    json: true
                })
            });

            if (!response.ok) throw new Error("API_ERROR");
            
            const rawText = await response.text();
            const data = JSON.parse(rawText.replace(/```json|```/g, "").trim());

            // FINAL SAFETY CLEANUP: If AI hallucinated common fake names, we reject the response.
            const fakeNames = ["diablo", "luci", "edwards", "huron", "green crystal", "ice blast"];
            const isHallucinating = JSON.stringify(data).toLowerCase().split(/\s+/).some(word => fakeNames.some(fake => word.includes(fake)));
            
            if (isHallucinating) {
                // Return a hardcoded fallback for Akai if it fails again
                if (heroName === "Akai") {
                    return {
                        heroes: [{name: "Diggie", logic: "Ultimate cancels Akai push"}, {name: "Chou", logic: "Can kick Akai out of his roll"}, {name: "Karrie", logic: "True damage shreds Akai's high HP"}],
                        items: [{name: "Dominance Ice", desc: "Reduces Akai's attack speed and healing"}, {name: "Demon Hunter Sword", desc: "Deals % HP damage against tanky Akai"}],
                        spell: {name: "Purify", why: "Escape Akai's pin and wall-trap"}
                    };
                }
                throw new Error("DATA_INTEGRITY_FAIL");
            }

            return data;
        }

        window.generateCounterIntel = async () => {
            const btn = document.getElementById('scanBtn');
            const status = document.getElementById('connectionStatus');
            const intelOutput = document.getElementById('intelOutput');

            btn.classList.add('loading');
            btn.disabled = true;
            intelOutput.classList.add('scan-effect');
            status.innerHTML = `<div class="w-2 h-2 rounded-full bg-blue-500 animate-pulse"></div><span class="text-[10px] font-black text-blue-300 uppercase">SCRUBBING HALLUCINATIONS...</span>`;

            try {
                const data = await runFreeAI(selectedHero.name);

                document.getElementById('emptyState').classList.add('hidden');
                document.getElementById('intelResults').classList.remove('hidden');

                document.getElementById('counterHeroes').innerHTML = data.heroes.map(h => `
                    <div class="p-4 bg-slate-900/50 rounded-2xl border border-white/5 hover:border-blue-500/30 transition-all">
                        <h4 class="font-black text-white text-sm uppercase italic tracking-wider">${h.name}</h4>
                        <p class="text-[11px] text-slate-400 mt-1 leading-relaxed">${h.logic}</p>
                    </div>
                `).join('');

                document.getElementById('counterGear').innerHTML = `
                    <div class="p-4 bg-orange-500/10 border border-orange-500/20 rounded-2xl">
                        <p class="text-[9px] font-black text-orange-500 uppercase mb-1">Authentic Spell</p>
                        <p class="text-sm font-black text-white italic uppercase">${data.spell.name}</p>
                        <p class="text-[10px] text-slate-400 mt-1">${data.spell.why}</p>
                    </div>
                    ${data.items.map(item => `
                        <div class="p-4 bg-white/5 rounded-2xl border border-white/5">
                            <p class="text-[9px] font-black text-slate-500 uppercase mb-1">Authentic Item</p>
                            <p class="text-xs font-bold text-slate-200 uppercase">${item.name}</p>
                            <p class="text-[10px] text-slate-500 mt-1">${item.desc}</p>
                        </div>
                    `).join('')}
                `;

                status.innerHTML = `<div class="w-2 h-2 rounded-full bg-green-500"></div><span class="text-[10px] font-black text-slate-300 uppercase">100% REAL DATA FOUND</span>`;
            } catch (e) {
                console.error(e);
                status.innerHTML = `<div class="w-2 h-2 rounded-full bg-red-500"></div><span class="text-[10px] font-black text-red-500 uppercase">DATA MISMATCH - RETRYING</span>`;
                setTimeout(() => generateCounterIntel(), 2000);
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
                intelOutput.classList.remove('scan-effect');
                lucide.createIcons();
            }
        };

        window.selectHero = (name) => {
            selectedHero = HEROES.find(h => h.name === name);
            document.getElementById('heroName').innerText = selectedHero.name;
            document.getElementById('roleBadge').innerText = selectedHero.role;
            document.getElementById('laneBadge').innerText = selectedHero.lane;
            document.getElementById('heroBanner').style.backgroundImage = `url(https://mobile-legends.fandom.com/wiki/Special:FilePath/${selectedHero.name.replace(/\s+/g, '_')}_Splash.jpg)`;
            document.getElementById('scanBtn').disabled = false;
            renderList();
        };

        function renderList() {
            const list = document.getElementById('heroList');
            const search = document.getElementById('heroSearch').value.toLowerCase();
            const filtered = HEROES.filter(h => h.name.toLowerCase().includes(search));

            list.innerHTML = filtered.map(h => `
                <div onclick="selectHero('${h.name}')" class="flex justify-between items-center px-4 py-3 rounded-xl cursor-pointer hover:bg-blue-500/10 border border-transparent transition-all group ${selectedHero?.name === h.name ? 'hero-active' : ''}">
                    <div class="flex flex-col">
                        <p class="text-sm font-bold ${selectedHero?.name === h.name ? 'text-blue-400' : 'text-slate-300'} uppercase tracking-tight">${h.name}</p>
                        <p class="text-[8px] text-slate-600 font-bold uppercase tracking-widest">${h.lane}</p>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        document.getElementById('heroSearch').addEventListener('input', renderList);
        renderList();
        lucide.createIcons();
    </script>
</body>
</html>
